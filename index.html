<!doctype html>
<html>

<head>
  <title>Line Chart</title>



  <style>
    canvas{
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }
  </style>
  <script>
    arr =[0,0];
    chrtinfo=[0];
    chrtinfo.pop();
  </script>
</head>

<body>
<div style="width:75%;">
  <canvas id="myChart" width="800" height="450"></canvas>

</div>

<canvas id="line-chart" width="800" height="450"></canvas>
<input type="file" onchange="loadFile(this.files[0])">
<input type="button" title="Affiche" style="width: 100px" onclick="afficharr()">
<br>
<pre id="output"></pre>
<script>


  async function loadFile(file) {
    //let text = await file.text();
    document.getElementById('output').textContent = await file.text();

  }
  function afficharr(){
// Vide la premiere donee des datasets
    for (t = 0; t < (myChart2.data.datasets.length)-1; t++) {
      while (myChart2.data.datasets.length != 0) {

      myChart2.data.datasets[t].data.pop();
      }
   }
    for (f=0;f<(arr[0].length);f++) {
      // Affiche un log de ce qui va etre enregistré pour le debug
      for (t = 0; t < (arr[0].length)-1; t++) {
        console.log(arr[0][f].split(",")[t],t,f);
        chrtinfo.push(arr[0][f].split(",")[t]);


      }
      // Classe et mets les données dans les datasets
      myChart2.data.labels.push(arr[0][f].split(",")[0]);
      myChart2.data.datasets[1].data.push(arr[0][f].split(",")[1]);
      myChart2.data.datasets[2].data.push(arr[0][f].split(",")[2]);
      myChart2.data.datasets[3].data.push(arr[0][f].split(",")[3]);
      myChart2.data.datasets[4].data.push(arr[0][f].split(",")[4]);
      myChart2.data.datasets[5].data.push(arr[0][f].split(",")[5]);
      myChart2.data.datasets[6].data.push(arr[0][f].split(",")[6]);
    }
    for (f=0;f<arr[1].length;f++) {
      // Mets les etiquettes de temps
      myChart2.data.datasets[f].label=arr[1][f];
    }
    myChart2.update();

  }




</script>

</body>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.6/Chart.bundle.min.js"></script>
<script type="text/javascript" src='js/vendor/csvToArray.js'></script>
<script type="text/javascript" src='traitDonn.js'></script>


<script src="line.js"></script>
</html>
